/*
sGlide is a jQuery plugin that generates a simple, highly flexible, feature-rich & mobile-ready slider.
Copyright (C) 2014  Daniel Kazmer
See <http://www.gnu.org/licenses/gpl.html>

author:		Daniel Kazmer - http://iframework.net
created:	24.11.2012
version:	2.0.0
*/
(function(e){var t={};var n={};var r={destroy:function(){this.each(function(t,r){var i=e(r);var s=i.selector;var o=i.attr("id");var u=e("#"+o+"_vert-marks");if(u[0])i.unwrap();else{var a=e("#"+o+"_button-marks");if(a[0])i.unwrap()}if(e("#"+o+"_plus")[0])e("#"+o+"_minus, #"+o+"_plus").remove();var f=e("#"+o+"_markers");if(f.length>0)f.remove();var l={down:"mousedown",up:"mouseup",move:"mousemove"};if(n[o+"-isMobile"]){l.down="touchstart";l.up="touchend";l.move="touchmove"}else if(window.navigator.msPointerEnabled){e(document).off(l.msup,eventDocumentMouseUp);e(document).off(l.msmove,eventDocumentMouseMove);i.off(l.msdown,eventBarMouseDown);i.children(".follow_bar").off(l.msdown,eventBarMouseDown);i.children(".slider_knob").off(l.msdown,eventKnobMouseDown).off(l.msup,eventKnobMouseDown)}else e(document).off("keydown."+o).off("keyup."+o);if(n[o+"-buttons"]){e("#"+o+"_plus").off(l.down).off(l.up);e("#"+o+"_minus").off(l.down).off(l.up)}e(document).off(l.move+"."+o).off(l.up+"."+o);e(window).off("orientationchange."+o);i.off(l.down);i.children(".slider_knob").off(l.up).off(l.down).remove();i.children(".follow_bar").off(l.down).remove();i.removeAttr("style")})},startAt:function(n,r){this.each(function(i,s){var o=e(s);var u=o.children(".slider_knob");var a=o.children(".follow_bar");var f=o.attr("id");t[f]=n;var l=o.width();var c=u.width();if(n<=0)n=0;else if(n>=100)n=100;var h=(l-c)*n/100+c/2;var p=h-c/2;if(r){u.animate({left:p+"px"},200);a.animate({width:h+"px"},200)}else{u.css("left",p+"px");a.css("width",h+"px")}})},init:function(r){this.each(function(i,s){var o=e(s);var u=o.attr("id");if(!u){u="sglide-"+i;o.attr("id",u)}o.html('<div class="follow_bar"></div><div class="slider_knob"></div>');var a=o.children(".slider_knob");var f=o.children(".follow_bar");var l=e.extend({startAt:0,image:"none",height:40,width:100,unit:"%",pill:true,snap:{marks:false,hard:false,onlyOnDrop:false,points:0},disabled:false,colorShift:[],vertical:false,showKnob:true,buttons:false,retina:true},r);o.removeAttr("style");n[u+"-isMobile"]=false;var c={down:"mousedown",up:"mouseup",move:"mousemove"},h=navigator.userAgent;if(h.match(/Android/i)||h.match(/webOS/i)||h.match(/iPhone/i)||h.match(/iPad/i)||h.match(/iPod/i)||h.match(/BlackBerry/i)){n[u+"-isMobile"]=true;c.down="touchstart";c.up="touchend";c.move="touchmove";if(window.navigator.msPointerEnabled){c.down="MSPointerDown";c.up="MSPointerUp";c.move="MSPointerMove"}var p=null,d=null}else if(h.match(/Windows Phone/i)){if(window.navigator.msPointerEnabled){o.css({"-ms-touch-action":"none"});c.msdown="MSPointerDown";c.msup="MSPointerUp";c.msmove="MSPointerMove"}else{c.down="touchstart";c.up="touchend";c.move="touchmove"}}t[u]=l.startAt;var v=0,m=l.vertical,g=l.snap.points>0&&l.snap.points<=9&&l.snap.marks,y="#333",b=l.showKnob&&!l.disabled?"2%":"0",w="inherit",E=Math.round(l.height)+"px",S=l.pill,x=l.image!="none"&&l.image!==""&&!l.disabled,T=false,N=false,C=o.attr("data-keys")=="true"?true:false,k=o.attr("data-keys")=="shift"?true:false,L=l.colorShift.length>1?true:false,A=n[u+"-isMobile"],O=window.devicePixelRatio>1&&l.retina;n[u+"-buttons"]=l.buttons;if(x){img=l.image;if(O){var M=img.split(".");var _=M.length;M[_-2]=M[_-2]+"@2x";img="";for(var i=0;i<_;i++){img+=M[i]+(i<_-1?".":"")}}a.html('<img src="'+img+'" style="visibility:hidden; position:absolute" />');a.children("img").load(function(){T=true;var t=e(this);if(O){t[0].style.width=t[0].offsetWidth/2+"px"}var n=t[0].naturalHeight;b=t[0].naturalWidth+"px";w=n+"px";y="url("+img+") no-repeat";var r={width:b,height:w,background:y};if(O)r["background-size"]="100%";a.css(r);f.css({height:w,"border-radius":S?n/2+"px 0 0 "+n/2+"px":"0px"});o.css({height:w,"border-radius":S?n/2+"px":"0px"});t.remove();o.knobMarginValue=0;if(n>l.height){knobMarginValue=(n-l.height)/2;o.css({height:l.height+"px"});a.css({top:"-"+knobMarginValue+"px"});f.css({height:l.height+"px","border-radius":S?n/2+"px 0 0 "+n/2+"px":"0px"})}else{o.css("overflow","hidden");f.find("div").css("height",w)}})}else{T=true;var D=l.height/2;o.css({"border-radius":S?D+"px":"0",overflow:"hidden"});f.css("border-radius",S?D+"px 0 0 "+D+"px":"0")}var P=l.unit,H=l.width;if(P!="px"&&P!="%")P="%";else if(P=="px")H=Math.round(H);else if(P=="%"&&Math.round(H)>100)H=100;o.css({width:H+P,height:E,"text-align":"left",margin:"auto",cursor:!l.disabled?"pointer":"default","z-index":"997",position:"relative","-webkit-touch-callout":"none"});var B=o.width();var j={"-webkit-box-sizing":"content-box","-khtml-box-sizing":"content-box","-moz-box-sizing":"content-box","-ms-box-sizing":"content-box","box-sizing":"content-box"},F={"-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"},I={"-webkit-transform":"rotate(-90deg)","-khtml-transform":"rotate(-90deg)","-moz-transform":"rotate(-90deg)","-ms-transform":"rotate(-90deg)",transform:"rotate(-90deg)","-webkit-transform-origin":B+"px 0","-khtml-transform-origin":B+"px 0","-moz-transform-origin":B+"px 0","-ms-transform-origin":B+"px 0","transform-origin":B+"px 0",filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=3)"};o.css(j).css(F);a.css({width:b,background:y,height:w,display:!l.disabled?"inline-block":"none","font-size":"0px",position:"relative","z-index":"999"}).css(j);f.css({position:!l.disabled?"absolute":"static",height:a.height()+"px",width:"0px","z-index":"998"}).css(j);var q=false;var R=Math.round(l.snap.points);var U=[0];var z=function(t){if(R===1)R=2;var n=a.width();var r=B-n;var i=r/(R-1);var s=[0];var f=i;while(f<=r+2){s.push(f);f+=i}i=100/(R-1);f=i;while(f<=101){U.push(f);f+=i}q=true;if(g){if(!t){o.after('<div id="'+u+'_markers"></div>');var l=e("#"+u+"_markers");l.css({width:B+"px",margin:"auto","padding-left":n/2+"px","-webkit-touch-callout":"none","box-sizing":"border-box"}).css(F)}else{var l=e("#"+u+"_markers");l.html("")}var c="";for(var h=0;h<s.length;h++)c+='<div style="display:inline-block; width:0; height:5px; border-left:#333 solid 1px; position:relative; left:'+(s[h]-h)+'px; float:left"></div>';l.html(c)}};var W=function(){if(g&&R>0&&R<10){var t=e("#"+u+", #"+u+"_markers");t.wrapAll('<div id="'+u+'_vert-marks" style="margin:0; z-index:997; width:'+H+P+'; -webkit-backface-visibility:hidden; -moz-backface-visibility:hidden; -ms-backface-visibility:hidden; backface-visibility:hidden"></div>');var n=e("#"+u+"_vert-marks");o.css("width","100%");n.css(j).css(I);for(var r=0;r<t.length;r++)t.css("margin","0")}else{o.css({margin:"0",top:"0",left:"0","backface-visibility":"hidden"}).css(I)}};var X=function(){Q=a.width()/B*50;var t="; z-index:1000; position:relative; top:30px",n='<div class="sglide-buttons" id="'+u+'_plus" style="display:inline-block; cursor:pointer'+(m?t:"")+'">&nbsp;+&nbsp;</div>',r='<div class="sglide-buttons" id="'+u+'_minus" style="display:inline-block; cursor:pointer'+(m?t:"")+'">&nbsp;&minus;&nbsp;</div>';if(g){if(!m){o.css("width","auto");var i=m?e("#"+u+"_vert-marks"):e("#"+u+", #"+u+"_markers");i.wrapAll('<div id="'+u+'_button-marks" style="display:inline-block; vertical-align:middle; width:'+H+P+'"></div>');var s=e("#"+u+"_button-marks")}else{var s=e("#"+u+"_vert-marks")}s.after(n);s.before(r)}else{o.css({display:!m?"inline-block":"block","vertical-align":"middle"});o.after(n);o.before(r)}var f=e("#"+u+"_plus"),h=e("#"+u+"_minus");h.css(F);f.css(F);if(!l.disabled){f.on(c.down,function(){G=true;V(">");Y=setTimeout(function(){J(">")},500)}).on(c.up,K);h.on(c.down,function(){G=true;V("<");Y=setTimeout(function(){J("<")},500)}).on(c.up,K)}},V=function(e,n){var i=a.width();var s=THE_VALUE=t[u];if(Z){var c=100/(l.snap.points-1);var h=c;for(var p=0;p<l.snap.points;p++){if(c>=THE_VALUE){if(e==">")THE_VALUE=Math.round(c)>Math.round(THE_VALUE)?c:c+h;else THE_VALUE=c-h;break}else c+=h}}else{if(e==">")THE_VALUE+=n?1:10;else THE_VALUE-=n?1:10}s=THE_VALUE;if(THE_VALUE+Q>100){THE_VALUE=100;s=100}else if(THE_VALUE-Q<0){THE_VALUE=0;s=0}var d=(B-i)*s/100+i/2;var v=d-i/2;a.css("left",v+"px");f.css("width",d+"px");if(L)ht(s);if(r.onButton)r.onButton({id:u,value:THE_VALUE,el:o});t[u]=THE_VALUE},J=function(e){var t=setInterval(function(){if(G)V(e,Z?false:true);else clearInterval(t)},Z?201:10)},K=function(){G=false;clearTimeout(Y)},Q=0,G=false,Y=null;var Z=l.snap.points>0&&l.snap.points<=9&&(l.snap.hard||l.snap.onlyOnDrop);var et=false;a.on(c.down,function(){et=true;o.data("state","active")}).on(c.up,function(){et=false});var tt="s-1";var nt=function(t,n){if(R>0&&R<10){var r=a.width();var i=B*(10-R)/100-2;var s=[];for(var o=0;o<U.length;o++){s.push((B-r)*U[o]/100)}var u=null,c=0;e.each(s,function(e){if(u===null||Math.abs(this-n)<Math.abs(u-n)){u=this;c=U[e]}});if(t=="drag"){if(l.snap.hard){a.css("left",u+"px");f.css("width",u+r/2+"px");rt(u,c)}else{if(Math.round(Math.abs(u-n))<i){a.css("left",u+"px");f.css("width",u+r/2+"px");rt(u,c)}else tt="s-1"}}else if(t=="hard"){a.css("left",u+"px");f.css("width",u+r/2+"px");return u}else{a.animate({left:u+"px"},"fast");f.animate({width:u+r/2+"px"},"fast");return u}}},rt=function(e,t){if(r.onSnap&&"s"+e!==tt){tt="s"+e;r.onSnap({id:u,value:t,el:o})}};var it=function(){o.sGlide("startAt",t[u]);if(g)z(true)};if(!A&&(C||k)){var st,ot=false,ut=m?40:37,at=m?38:39;e(document).on("keydown."+u,function(e){if(!ot&&!l.disabled){if(window.event){st=window.event.keyCode;if(k&&!window.event.shiftKey)return false}else if(e){st=e.which;if(k&&!e.shiftKey)return false}if(st==ut){G=true;V("<");Y=setTimeout(function(){J("<")},500);ot=true}else if(st==at){G=true;V(">");Y=setTimeout(function(){J(">")},500);ot=true}}}).on("keyup."+u,function(){ot=false;K()})}if(A){e(document).on(c.down+"."+u,function(e){p=e.originalEvent.touches[0].pageX;d=e.originalEvent.touches[0].pageY})}if(A||h.match(/Windows Phone/i)){e(window).on("orientationchange."+u,it)}e(document).on(c.move+"."+u,function(e){if(!et)return false;e=e||event;var t=null,n=a.width();if(m){var i=o.position().top+B;if(A){d=e.originalEvent.touches[0].pageY;t=i-d}else t=i-e.pageY}else{if(A){p=e.originalEvent.touches[0].pageX;t=p-o.offset().left}else t=e.pageX-o.offset().left}var s=n/2;var u=t-s;if(e.returnValue)e.returnValue=false;if(t<=s){a.css("left","0px");f.css("width",s+"px")}else if(t>=B-s){a.css("left",B-n+"px");f.css("width",B-s+"px")}else{a.css("left",t-s+"px");f.css("width",t+"px");if(!l.snap.onlyOnDrop)nt("drag",u)}v=a[0].style.left;v=v.replace("px","");var c=o.data("state");if(r.drag&&c=="active")r.drag(lt(ft(v)));if(L&&c=="active")ht(ft(v))}).on(c.up+"."+u,function(e){var t=o.data("state");et=false;if(t=="active"){e=e||event;var n=null,i=0;if(m){i=o.position().top+B;n=i-((!A?e.pageY:d)-2)}else n=(!A?e.pageX:p)-o.offset().left;var s=a.width();var u=s/2;var c=n-u;if(R>0&&R<10&&(l.snap.onlyOnDrop||l.snap.hard))v=nt(l.snap.hard?"hard":"drop",c);else{var h=a[0].offsetLeft,g=B-s;if(h<=0){a.css("left","0px");f.css("width",u+"px")}else if(h>=g){a.css("left",g+"px");f.css("width",B-u+"px")}v=a[0].style.left;v.replace("px","")}if(r.drop)r.drop(lt(ft(v)));if(r.drag&&t=="active")r.drag(lt(ft(v)));o.data("state","inactive");if(L)ht(ft(v))}if(G)K()});var ft=function(e){e=parseFloat(e,10);var n=e/(B-a.width())*100;t[u]=n;return n};var lt=function(e){if(o.data("state")=="active"){return{id:u,value:e,el:o}}};var ct=function(){var e=o.offsetHeight/2;var t="border-radius: "+(S?e+"px 0 0 "+e+"px":"0px");f.css({overflow:"hidden","background-color":l.colorShift[0]});f.html('<div style="opacity:'+l.startAt/100+"; height:100%; background-color:"+l.colorShift[1]+'; "></div>')};var ht=function(e){f[0].childNodes[0].style.opacity=e/100};var pt=function(e){e=e||event;e.stopPropagation();e.preventDefault();if(e.returnValue)e.returnValue=false;et=true;o.data("state","active");if(!A&&!l.snap.onlyOnDrop){var t=null;if(m){var n=o.position().top+o.width();t=n-(e.pageY-2)}else t=e.pageX-o.offset().left;var r=t-a.width()/2;a.css("left",r+"px");f.css("width",r+a.width()/2+"px");if(r<0)a.css("left","0px");else if(r>=o.width()-a.width())a.css("left",o.width()-a.width()+"px")}};if(!l.disabled){o.on(c.down,function(e){pt(e)});f.on(c.down,function(e){pt(e)})}var dt=function(e){startAt=e?e:l.startAt;o.sGlide("startAt",startAt);var t={id:u,value:startAt,el:o};if(r.drop)r.drop(t);if(r.drag)r.drag(t);if(R>0&&R<10)z();if(m)W();if(n[u+"-buttons"])X();if(L){ct();ht(startAt)}};var vt=setInterval(function(){if(T){clearInterval(vt);dt(t[u]);if(r.onload)r.onload()}},1)})}};e.fn.sGlide=function(t){if(r[t]){return r[t].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof t==="object"||!t){return r.init.apply(this,arguments)}else{e.error("Method "+t+" does not exist on jQuery.sGlide")}}})(jQuery)